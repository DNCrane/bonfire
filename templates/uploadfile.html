<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Bonfire File Upload</title>
    <meta name="description" content="">
    <meta name="author" content="">
  </head>
  
  <head>
    <script type="text/javascript">
    function displaymessage()
    {
	var form = $("#uploadForm");
    	var message = form.formToDict();
	message["body"] = "http://localhost:8888/files/" + document.getElementById('filename').value;
     	$.postJSON("/a/message/new", message);
    }
    </script>
  </head>

  <body>
	<form action="/upload/{{ room }}" enctype="multipart/form-data" method="post" id="uploadForm">
	<p>
	Please specify a file, or a set of files:<br>
	<input type="file" name="newfile" id="filename">
	<input type="hidden" name="room" value="{{ room }}" />
	</p>
	<p>
	{% if status %}
		{{status}}
	{% end %}
	</p>

        {% raw xsrf_form_html() %} 
	<div>
	<input type="submit" value="Send" onClick="displaymessage()">
	</div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
    <script src="{{ static_url("upload.js") }}" type="text/javascript"></script>
</body></html>
